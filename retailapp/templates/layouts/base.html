<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" name="viewport">
  <title>{% block title %} {% endblock %} | SK Dresses</title>

  <!-- General CSS Files -->
  <link rel="stylesheet" href="/static/assets/modules/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="/static/assets/modules/fontawesome/css/all.min.css">
  <link rel="stylesheet" href="/static/assets/modules/ionicons/css/ionicons.min.css">
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"> -->

  <!-- CSS Libraries -->
  <link rel="stylesheet" href="/static/assets/modules/jqvmap/dist/jqvmap.min.css">
  <link rel="stylesheet" href="/static/assets/modules/summernote/summernote-bs4.css">
  <link rel="stylesheet" href="/static/assets/modules/owlcarousel2/dist/assets/owl.carousel.min.css">
  <link rel="stylesheet" href="/static/assets/modules/owlcarousel2/dist/assets/owl.theme.default.min.css">

  <!-- Template CSS -->
  <link rel="stylesheet" href="/static/assets/css/style.css">
  <link rel="stylesheet" href="/static/assets/css/components.css">

  <link rel="shortcut icon" href="/static/assets/img/SK_logo.png" type="image/x-icon"/>

  {% block page_css %} {% endblock %}

<!-- Start GA -->

<!-- /END GA -->
</head>

<body>
  <div id="app">
    <div class="main-wrapper main-wrapper-1">
        {% include 'includes/navigation.html' %}
        {% include 'includes/sidebar.html' %}
        {% load i18n %}
        {% block content %} {% endblock %}
      
    </div>
  </div>

  <!-- General JS Scripts -->
  <script src="/static/assets/modules/jquery.min.js"></script>
  <script src="/static/assets/modules/popper.js"></script>
  <script src="/static/assets/modules/tooltip.js"></script>
  <script src="/static/assets/modules/bootstrap/js/bootstrap.min.js"></script>
  <script src="/static/assets/modules/nicescroll/jquery.nicescroll.min.js"></script>
  <script src="/static/assets/modules/moment.min.js"></script>
  <script src="/static/assets/js/stisla.js"></script>
  
  <!-- JS Libraies -->
  <script src="/static/assets/modules/jquery.sparkline.min.js"></script>
  <script src="/static/assets/modules/chart.min.js"></script>
  <script src="/static/assets/modules/owlcarousel2/dist/owl.carousel.min.js"></script>
  <script src="/static/assets/modules/summernote/summernote-bs4.js"></script>
  <script src="/static/assets/modules/chocolat/dist/js/jquery.chocolat.min.js"></script>
  <script src="/static/assets/js/page/bootstrap-modal.js"></script>
  {% block page_js %} {% endblock %}
  <!-- Page Specific JS File -->
  <script src="/static/assets/js/page/index.js"></script>
  
  <!-- Template JS File -->
  <script src="/static/assets/js/scripts.js"></script>
  <script src="/static/assets/js/custom.js"></script>
  
  

<script>
    const lastSeen = "{{ request.session.last_seen|default:'' }}";
    console.log("Raw lastSeen from session:", lastSeen);

    function updateLastSeenText(lastSeenTime) {
        if (!lastSeenTime) {
            document.getElementById("last-seen-text").textContent = "Login time unavailable.";
            return;
        }

        const lastSeen = new Date(lastSeenTime);
        const now = new Date();

        const diffMs = now - lastSeen;
        const diffMin = Math.floor(diffMs / 60000);
        const diffSec = Math.floor((diffMs % 60000) / 1000);

        let text = "";
        if (diffMin >= 1) {
            text = `Logged in ${diffMin} minute${diffMin > 1 ? 's' : ''} ago`;
        } else {
            text = `Logged in ${diffSec} second${diffSec !== 1 ? 's' : ''} ago`;
        }

        document.getElementById("last-seen-text").textContent = text;
    }

    updateLastSeenText(lastSeen);
    setInterval(() => updateLastSeenText(lastSeen), 10000);
</script>

    {% include 'includes/footer.html' %}
</body>
</html>
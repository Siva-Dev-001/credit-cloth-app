{% extends 'layouts/base.html' %}
{% load static %}
{% load tz %}
{% block title %} Inventory {% endblock title %}

{% block page_css %}
<style></style>
{% endblock %}

{% block content %}
 <!-- Main Content -->
 <div class="main-content">
    <section class="section">
        <div class="section-header">
            <h1>Inventory</h1>
            <div class="section-header-breadcrumb">
              <div class="breadcrumb-item active"><a href="/">Dashboard</a></div>
              <!-- <div class="breadcrumb-item"><a href="#">Bootstrap Components</a></div> -->
              <div class="breadcrumb-item">Inventory</div>
            </div>
        </div>

        <h2>Inventory Management</h2>

        <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
            <span>Available Inventory</span>
            <a href="{% url 'add_inventory_item' %}" class="btn btn-sm btn-primary">
            + Add New Item
            </a>
        </div>

        <div class="card-body">
            <table class="table table-bordered">
            <thead>
                <tr>
                <th>#</th>
                <th>Item Name</th>
                <th>Description</th>
                <th>HSN/SAC Code</th>
                <th>Actual Price</th>
                <th>Markup Price</th>
                <th>Unit</th>
                <th>Created</th>
                <th>Updated</th>
                <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for item in inventory_items %}
                <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ item.name }}</td>
                <td>{{ item.description }}</td>
                <td>{{ item.hsn_sac_code }}</td>
                <td>{{ item.actual_price }}</td>
                <td>{{ item.markup_price }}</td>
                <td>{{ item.unit }}</td>
                <td>{{ item.created_at|timezone:"Asia/Kolkata" }}</td>
                <td>{{ item.updated_at|timezone:"Asia/Kolkata" }}</td>
                <td>
                    <a href="{% url 'edit_inventory_item' item.id %}" class="btn btn-sm btn-warning">Edit</a>
                </td>
                </tr>
                {% endfor %}
            </tbody>
            </table>
        </div>
        </div>

        <hr>

        <div class="card mt-5">
        <div class="card-header">
            <h5>{{ title|default:"Add/Edit Inventory Item" }}</h5>
        </div>
        <div class="card-body">
            <form method="post">
            {% csrf_token %}
            
            <div class="mb-3">
                <label for="id_name" class="form-label">Item Name</label>
                <input type="text" name="name" class="form-control" id="id_name" value="{{ item.name|default:'' }}" required>
            </div>

            <div class="mb-3">
                <label for="id_description" class="form-label">Description</label>
                <textarea name="description" class="form-control" id="id_description">{{ item.description|default:'' }}</textarea>
            </div>

            <div class="mb-3">
                <label for="id_hsn_sac_code" class="form-label">HSN/SAC Code</label>
                <input type="text" name="hsn_sac_code" class="form-control" id="id_hsn_sac_code" value="{{ item.hsn_sac_code|default:'' }}">
            </div>

            <div class="mb-3">
                <label for="id_actual_price" class="form-label">Actual Price</label>
                <input type="number" min="1" step="0.01" name="actual_price" class="form-control" id="id_actual_price" placeholder="0.00" value="{{ item.actual_price|default:'' }}">
            </div>

            <div class="mb-3">
                <label for="id_markup_price" class="form-label">Markup Price</label>
                <input type="number" min="1" step="0.01" name="markup_price" class="form-control" id="id_markup_price" placeholder="0.00" value="{{ item.markup_price|default:'' }}">
            </div>

            <div class="mb-3">
                <label for="id_unit" class="form-label">Unit</label>
                <input type="number" min="1" name="unit" class="form-control border border-dark" id="id_unit" value="{{ item.unit|default:'' }}">
            </div>

            <button type="submit" class="btn btn-success">Save</button>
            <a href="{% url 'inventory_list' %}" class="btn btn-secondary">Cancel</a>
            </form>
        </div>
        </div>

    </section>
</div>
{% endblock %}

{% block page_js %} 
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
    $(document).ready(function () {
   
   setTimeout(function() {
       $('.alert').fadeOut(); // Hides the alert smoothly
   }, 10000); // 10 Seconds
});
</script>
{% endblock %}